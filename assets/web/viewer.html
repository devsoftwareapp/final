<!doctype html>

<html dir="ltr" mozdisallowselectionprint>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="google" content="notranslate" />
    <title>PDF.js viewer</title>

<link rel="resource" type="application/l10n" href="locale/locale.json" />
<script src="../build/pdf.mjs" type="module"></script>

    <link rel="stylesheet" href="viewer.css" />

  <script src="viewer.mjs" type="module"></script>
  </head>

  <body tabindex="0">
    <div id="outerContainer">
      <span id="viewer-alert" class="visuallyHidden" role="alert"></span>

      <div id="sidebarContainer">
        <div id="toolbarSidebar" class="toolbarHorizontalGroup">
          <div id="toolbarSidebarLeft">
            <div id="sidebarViewButtons" class="toolbarHorizontalGroup toggled" role="radiogroup">
              <button
                id="viewThumbnail"
                class="toolbarButton toggled"
                type="button"
                tabindex="0"
                data-l10n-id="pdfjs-thumbs-button"
                role="radio"
                aria-checked="true"
                aria-controls="thumbnailView"
              >
                <span data-l10n-id="pdfjs-thumbs-button-label"></span>
              </button>
              <button
                id="viewOutline"
                class="toolbarButton"
                type="button"
                tabindex="0"
                data-l10n-id="pdfjs-document-outline-button"
                role="radio"
                aria-checked="false"
                aria-controls="outlineView"
              >
                <span data-l10n-id="pdfjs-document-outline-button-label"></span>
              </button>
              <button
                id="viewAttachments"
                class="toolbarButton"
                type="button"
                tabindex="0"
                data-l10n-id="pdfjs-attachments-button"
                role="radio"
                aria-checked="false"
                aria-controls="attachmentsView"
              >
                <span data-l10n-id="pdfjs-attachments-button-label"></span>
              </button>
              <button
                id="viewLayers"
                class="toolbarButton"
                type="button"
                tabindex="0"
                data-l10n-id="pdfjs-layers-button"
                role="radio"
                aria-checked="false"
                aria-controls="layersView"
              >
                <span data-l10n-id="pdfjs-layers-button-label"></span>
              </button>
            </div>
          </div>

          <div id="toolbarSidebarRight">
            <div id="outlineOptionsContainer" class="toolbarHorizontalGroup">
              <div class="verticalToolbarSeparator"></div>

              <button
                id="currentOutlineItem"
                class="toolbarButton"
                type="button"
                disabled="disabled"
                tabindex="0"
                data-l10n-id="pdfjs-current-outline-item-button"
              >
                <span data-l10n-id="pdfjs-current-outline-item-button-label"></span>
              </button>
            </div>
          </div>
        </div>
        <div id="sidebarContent">
          <div id="thumbnailView"></div>
          <div id="outlineView" class="hidden"></div>
          <div id="attachmentsView" class="hidden"></div>
          <div id="layersView" class="hidden"></div>
        </div>
        <div id="sidebarResizer"></div>
      </div>
      <!-- sidebarContainer -->

      <div id="mainContainer">
        <div class="toolbar">
          <div id="toolbarContainer">
            <div id="toolbarViewer" class="toolbarHorizontalGroup">
              <div id="toolbarViewerLeft" class="toolbarHorizontalGroup">
                <button
                  id="sidebarToggleButton"
                  class="toolbarButton"
                  type="button"
                  tabindex="0"
                  data-l10n-id="pdfjs-toggle-sidebar-button"
                  aria-expanded="false"
                  aria-haspopup="true"
                  aria-controls="sidebarContainer"
                >
                  <span data-l10n-id="pdfjs-toggle-sidebar-button-label"></span>
                </button>
                <div class="toolbarButtonSpacer"></div>
                <div class="toolbarButtonWithContainer">
                  <button
                    id="viewFindButton"
                    class="toolbarButton"
                    type="button"
                    tabindex="0"
                    data-l10n-id="pdfjs-findbar-button"
                    aria-expanded="false"
                    aria-controls="findbar"
                  >
                    <span data-l10n-id="pdfjs-findbar-button-label"></span>
                  </button>
                  <div class="hidden doorHanger toolbarHorizontalGroup" id="findbar">
                    <div id="findInputContainer" class="toolbarHorizontalGroup">
                      <span class="loadingInput end toolbarHorizontalGroup">
                        <input id="findInput" class="toolbarField" tabindex="0" data-l10n-id="pdfjs-find-input" aria-invalid="false" />
                      </span>
                      <div class="toolbarHorizontalGroup">
                        <button id="findPreviousButton" class="toolbarButton" type="button" tabindex="0" data-l10n-id="pdfjs-find-previous-button">
                          <span data-l10n-id="pdfjs-find-previous-button-label"></span>
                        </button>
                        <div class="splitToolbarButtonSeparator"></div>
                        <button id="findNextButton" class="toolbarButton" type="button" tabindex="0" data-l10n-id="pdfjs-find-next-button">
                          <span data-l10n-id="pdfjs-find-next-button-label"></span>
                        </button>
                      </div>
                    </div>

                    <div id="findbarOptionsOneContainer" class="toolbarHorizontalGroup">
                      <div class="toggleButton toolbarLabel">
                        <input type="checkbox" id="findHighlightAll" tabindex="0" />
                        <label for="findHighlightAll" data-l10n-id="pdfjs-find-highlight-checkbox"></label>
                      </div>
                      <div class="toggleButton toolbarLabel">
                        <input type="checkbox" id="findMatchCase" tabindex="0" />
                        <label for="findMatchCase" data-l10n-id="pdfjs-find-match-case-checkbox-label"></label>
                      </div>
                    </div>
                    <div id="findbarOptionsTwoContainer" class="toolbarHorizontalGroup">
                      <div class="toggleButton toolbarLabel">
                        <input type="checkbox" id="findMatchDiacritics" tabindex="0" />
                        <label for="findMatchDiacritics" data-l10n-id="pdfjs-find-match-diacritics-checkbox-label"></label>
                      </div>
                      <div class="toggleButton toolbarLabel">
                        <input type="checkbox" id="findEntireWord" tabindex="0" />
                        <label for="findEntireWord" data-l10n-id="pdfjs-find-entire-word-checkbox-label"></label>
                      </div>
                    </div>

                    <div id="findbarMessageContainer" class="toolbarHorizontalGroup" aria-live="polite">
                      <span id="findResultsCount" class="toolbarLabel"></span>
                      <span id="findMsg" class="toolbarLabel"></span>
                    </div>
                  </div>
                  <!-- findbar -->
                </div>
                <div class="toolbarHorizontalGroup hiddenSmallView">
                  <button class="toolbarButton" type="button" id="previous" tabindex="0" data-l10n-id="pdfjs-previous-button">
                    <span data-l10n-id="pdfjs-previous-button-label"></span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button class="toolbarButton" type="button" id="next" tabindex="0" data-l10n-id="pdfjs-next-button">
                    <span data-l10n-id="pdfjs-next-button-label"></span>
                  </button>
                </div>
                <div class="toolbarHorizontalGroup">
                  <span class="loadingInput start toolbarHorizontalGroup">
                    <input
                      type="number"
                      id="pageNumber"
                      class="toolbarField"
                      value="1"
                      min="1"
                      tabindex="0"
                      data-l10n-id="pdfjs-page-input"
                      autocomplete="off"
                    />
                  </span>
                  <span id="numPages" class="toolbarLabel"></span>
                </div>
              </div>
              <div id="toolbarViewerMiddle" class="toolbarHorizontalGroup">
                <div class="toolbarHorizontalGroup">
                  <button id="zoomOutButton" class="toolbarButton" type="button" tabindex="0" data-l10n-id="pdfjs-zoom-out-button">
                    <span data-l10n-id="pdfjs-zoom-out-button-label"></span>
                  </button>
                  <div class="splitToolbarButtonSeparator"></div>
                  <button id="zoomInButton" class="toolbarButton" type="button" tabindex="0" data-l10n-id="pdfjs-zoom-in-button">
                    <span data-l10n-id="pdfjs-zoom-in-button-label"></span>
                  </button>
                </div>
                <span id="scaleSelectContainer" class="dropdownToolbarButton">
                  <select id="scaleSelect" tabindex="0" data-l10n-id="pdfjs-zoom-select">
                    <option id="pageAutoOption" value="auto" selected="selected" data-l10n-id="pdfjs-page-scale-auto"></option>
                    <option id="pageActualOption" value="page-actual" data-l10n-id="pdfjs-page-scale-actual"></option>
                    <option id="pageFitOption" value="page-fit" data-l10n-id="pdfjs-page-scale-fit"></option>
                    <option id="pageWidthOption" value="page-width" data-l10n-id="pdfjs-page-scale-width"></option>
                    <option
                      id="customScaleOption"
                      value="custom"
                      disabled="disabled"
                      hidden="true"
                      data-l10n-id="pdfjs-page-scale-percent"
                      data-l10n-args='{ "scale": 0 }'
                    ></option>
                    <option value="0.5" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 50 }'></option>
                    <option value="0.75" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 75 }'></option>
                    <option value="1" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 100 }'></option>
                    <option value="1.25" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 125 }'></option>
                    <option value="1.5" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 150 }'></option>
                    <option value="2" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 200 }'></option>
                    <option value="3" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 300 }'></option>
                    <option value="4" data-l10n-id="pdfjs-page-scale-percent" data-l10n-args='{ "scale": 400 }'></option>
                  </select>
                </span>
              </div>
              <div id="toolbarViewerRight" class="toolbarHorizontalGroup">
                <div id="editorModeButtons" class="toolbarHorizontalGroup">
                  <div id="editorComment" class="toolbarButtonWithContainer" hidden="true">
                    <button
                      id="editorCommentButton"
                      class="toolbarButton"
                      type="button"
                      tabindex="0"
                      disabled="disabled"
                      aria-expanded="false"
                      aria-haspopup="true"
                      aria-controls="editorCommentParamsToolbar"
                      data-l10n-id="pdfjs-editor-comment-button"
                    >
                      <span data-l10n-id="pdfjs-editor-comment-button-label"></span>
                    </button>
                    <div class="editorParamsToolbar hidden menu" id="editorCommentParamsToolbar">
                      <div id="editorCommentsSidebar" class="menuContainer comment sidebar" role="landmark" aria-labelledby="editorCommentsSidebarHeader">
                        <div id="editorCommentsSidebarResizer" class="sidebarResizer" role="separator" aria-controls="editorCommentsSidebar" tabindex="0"></div>
                        <div id="editorCommentsSidebarHeader" role="heading" aria-level="2">
                          <span class="commentCount">
                            <span id="editorCommentsSidebarTitle" data-l10n-id="pdfjs-editor-comments-sidebar-title" data-l10n-args='{ "count": 0 }'></span>
                            <span id="editorCommentsSidebarCount"></span>
                          </span>
                          <button id="editorCommentsSidebarCloseButton" type="button" tabindex="0" data-l10n-id="pdfjs-editor-comments-sidebar-close-button">
                            <span data-l10n-id="pdfjs-editor-comments-sidebar-close-button-label"></span>
                          </button>
                        </div>
                        <div id="editorCommentsSidebarListContainer" tabindex="-1">
                          <ul id="editorCommentsSidebarList"></ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="editorSignature" class="toolbarButtonWithContainer" hidden="true">
                    <button
                      id="editorSignatureButton"
                      class="toolbarButton"
                      type="button"
                      tabindex="0"
                      disabled="disabled"
                      aria-expanded="false"
                      aria-haspopup="true"
                      aria-controls="editorSignatureParamsToolbar"
                      data-l10n-id="pdfjs-editor-signature-button"
                    >
                      <span data-l10n-id="pdfjs-editor-signature-button-label"></span>
                    </button>
                    <div class="editorParamsToolbar hidden doorHangerRight menu" id="editorSignatureParamsToolbar">
                      <div id="addSignatureDoorHanger" class="menuContainer" role="region" data-l10n-id="pdfjs-editor-add-signature-container">
                        <button
                          id="editorSignatureAddSignature"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-editor-signature-add-signature-button"
                        >
                          <span data-l10n-id="pdfjs-editor-signature-add-signature-button-label" class="editorParamsLabel"></span>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div id="editorHighlight" class="toolbarButtonWithContainer">
                    <button
                      id="editorHighlightButton"
                      class="toolbarButton"
                      type="button"
                      disabled="disabled"
                      aria-expanded="false"
                      aria-haspopup="true"
                      aria-controls="editorHighlightParamsToolbar"
                      tabindex="0"
                      data-l10n-id="pdfjs-editor-highlight-button"
                    >
                      <span data-l10n-id="pdfjs-editor-highlight-button-label"></span>
                    </button>
                    <div class="editorParamsToolbar hidden doorHangerRight" id="editorHighlightParamsToolbar">
                      <div id="highlightParamsToolbarContainer" class="editorParamsToolbarContainer">
                        <div id="editorHighlightColorPicker" class="colorPicker">
                          <span id="highlightColorPickerLabel" class="editorParamsLabel" data-l10n-id="pdfjs-editor-highlight-colorpicker-label"></span>
                        </div>
                        <div id="editorHighlightThickness">
                          <label
                            for="editorFreeHighlightThickness"
                            class="editorParamsLabel"
                            data-l10n-id="pdfjs-editor-free-highlight-thickness-input"
                          ></label>
                          <div class="thicknessPicker">
                            <input
                              type="range"
                              id="editorFreeHighlightThickness"
                              class="editorParamsSlider"
                              data-l10n-id="pdfjs-editor-free-highlight-thickness-title"
                              value="12"
                              min="8"
                              max="24"
                              step="1"
                              tabindex="0"
                            />
                          </div>
                        </div>
                        <div id="editorHighlightVisibility">
                          <div class="divider"></div>
                          <div class="toggler">
                            <label for="editorHighlightShowAll" class="editorParamsLabel" data-l10n-id="pdfjs-editor-highlight-show-all-button-label"></label>
                            <button
                              id="editorHighlightShowAll"
                              class="toggle-button"
                              type="button"
                              data-l10n-id="pdfjs-editor-highlight-show-all-button"
                              aria-pressed="true"
                              tabindex="0"
                            ></button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="editorFreeText" class="toolbarButtonWithContainer">
                    <button
                      id="editorFreeTextButton"
                      class="toolbarButton"
                      type="button"
                      disabled="disabled"
                      aria-expanded="false"
                      aria-haspopup="true"
                      aria-controls="editorFreeTextParamsToolbar"
                      tabindex="0"
                      data-l10n-id="pdfjs-editor-free-text-button"
                    >
                      <span data-l10n-id="pdfjs-editor-free-text-button-label"></span>
                    </button>
                    <div class="editorParamsToolbar hidden doorHangerRight" id="editorFreeTextParamsToolbar">
                      <div class="editorParamsToolbarContainer">
                        <div class="editorParamsSetter">
                          <label for="editorFreeTextColor" class="editorParamsLabel" data-l10n-id="pdfjs-editor-free-text-color-input"></label>
                          <input type="color" id="editorFreeTextColor" class="editorParamsColor" tabindex="0" />
                        </div>
                        <div class="editorParamsSetter">
                          <label for="editorFreeTextFontSize" class="editorParamsLabel" data-l10n-id="pdfjs-editor-free-text-size-input"></label>
                          <input type="range" id="editorFreeTextFontSize" class="editorParamsSlider" value="10" min="5" max="100" step="1" tabindex="0" />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="editorInk" class="toolbarButtonWithContainer">
                    <button
                      id="editorInkButton"
                      class="toolbarButton"
                      type="button"
                      disabled="disabled"
                      aria-expanded="false"
                      aria-haspopup="true"
                      aria-controls="editorInkParamsToolbar"
                      tabindex="0"
                      data-l10n-id="pdfjs-editor-ink-button"
                    >
                      <span data-l10n-id="pdfjs-editor-ink-button-label"></span>
                    </button>
                    <div class="editorParamsToolbar hidden doorHangerRight" id="editorInkParamsToolbar">
                      <div class="editorParamsToolbarContainer">
                        <div class="editorParamsSetter">
                          <label for="editorInkColor" class="editorParamsLabel" data-l10n-id="pdfjs-editor-ink-color-input"></label>
                          <input type="color" id="editorInkColor" class="editorParamsColor" tabindex="0" />
                        </div>
                        <div class="editorParamsSetter">
                          <label for="editorInkThickness" class="editorParamsLabel" data-l10n-id="pdfjs-editor-ink-thickness-input"></label>
                          <input type="range" id="editorInkThickness" class="editorParamsSlider" value="1" min="1" max="20" step="1" tabindex="0" />
                        </div>
                        <div class="editorParamsSetter">
                          <label for="editorInkOpacity" class="editorParamsLabel" data-l10n-id="pdfjs-editor-ink-opacity-input"></label>
                          <input type="range" id="editorInkOpacity" class="editorParamsSlider" value="1" min="0.05" max="1" step="0.05" tabindex="0" />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="editorStamp" class="toolbarButtonWithContainer">
                    <button
                      id="editorStampButton"
                      class="toolbarButton"
                      type="button"
                      disabled="disabled"
                      aria-expanded="false"
                      aria-haspopup="true"
                      aria-controls="editorStampParamsToolbar"
                      tabindex="0"
                      data-l10n-id="pdfjs-editor-stamp-button"
                    >
                      <span data-l10n-id="pdfjs-editor-stamp-button-label"></span>
                    </button>
                    <div class="editorParamsToolbar hidden doorHangerRight menu" id="editorStampParamsToolbar">
                      <div class="menuContainer">
                        <button
                          id="editorStampAddImage"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-editor-stamp-add-image-button"
                        >
                          <span class="editorParamsLabel" data-l10n-id="pdfjs-editor-stamp-add-image-button-label"></span>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="editorModeSeparator" class="verticalToolbarSeparator"></div>

                <div class="toolbarHorizontalGroup hiddenMediumView">
                  <button id="printButton" class="toolbarButton" type="button" tabindex="0" data-l10n-id="pdfjs-print-button">
                    <span data-l10n-id="pdfjs-print-button-label"></span>
                  </button>

                  <button id="downloadButton" class="toolbarButton" type="button" tabindex="0" data-l10n-id="pdfjs-save-button">
                    <span data-l10n-id="pdfjs-save-button-label"></span>
                  </button>
                </div>

                <div class="verticalToolbarSeparator hiddenMediumView"></div>

                <div id="secondaryToolbarToggle" class="toolbarButtonWithContainer">
                  <button
                    id="secondaryToolbarToggleButton"
                    class="toolbarButton"
                    type="button"
                    tabindex="0"
                    data-l10n-id="pdfjs-tools-button"
                    aria-expanded="false"
                    aria-haspopup="true"
                    aria-controls="secondaryToolbar"
                  >
                    <span data-l10n-id="pdfjs-tools-button-label"></span>
                  </button>
                  <div id="secondaryToolbar" class="hidden doorHangerRight menu">
                    <div id="secondaryToolbarButtonContainer" class="menuContainer">
                      <button id="secondaryOpenFile" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-open-file-button">
                        <span data-l10n-id="pdfjs-open-file-button-label"></span>
                      </button>

                      <div class="visibleMediumView">
                        <button id="secondaryPrint" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-print-button">
                          <span data-l10n-id="pdfjs-print-button-label"></span>
                        </button>

                        <button id="secondaryDownload" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-save-button">
                          <span data-l10n-id="pdfjs-save-button-label"></span>
                        </button>

                      </div>

                      <div class="horizontalToolbarSeparator"></div>

                      <button id="presentationMode" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-presentation-mode-button">
                        <span data-l10n-id="pdfjs-presentation-mode-button-label"></span>
                      </button>

                      <a href="#" id="viewBookmark" class="toolbarButton labeled" tabindex="0" data-l10n-id="pdfjs-bookmark-button">
                        <span data-l10n-id="pdfjs-bookmark-button-label"></span>
                      </a>

                      <div id="viewBookmarkSeparator" class="horizontalToolbarSeparator"></div>

                      <button id="firstPage" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-first-page-button">
                        <span data-l10n-id="pdfjs-first-page-button-label"></span>
                      </button>
                      <button id="lastPage" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-last-page-button">
                        <span data-l10n-id="pdfjs-last-page-button-label"></span>
                      </button>

                      <div class="horizontalToolbarSeparator"></div>

                      <button id="pageRotateCw" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-page-rotate-cw-button">
                        <span data-l10n-id="pdfjs-page-rotate-cw-button-label"></span>
                      </button>
                      <button id="pageRotateCcw" class="toolbarButton labeled" type="button" tabindex="0" data-l10n-id="pdfjs-page-rotate-ccw-button">
                        <span data-l10n-id="pdfjs-page-rotate-ccw-button-label"></span>
                      </button>

                      <div class="horizontalToolbarSeparator"></div>

                      <div id="cursorToolButtons" role="radiogroup">
                        <button
                          id="cursorSelectTool"
                          class="toolbarButton labeled toggled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-cursor-text-select-tool-button"
                          role="radio"
                          aria-checked="true"
                        >
                          <span data-l10n-id="pdfjs-cursor-text-select-tool-button-label"></span>
                        </button>
                        <button
                          id="cursorHandTool"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-cursor-hand-tool-button"
                          role="radio"
                          aria-checked="false"
                        >
                          <span data-l10n-id="pdfjs-cursor-hand-tool-button-label"></span>
                        </button>
                      </div>

                      <div class="horizontalToolbarSeparator"></div>

                      <div id="scrollModeButtons" role="radiogroup">
                        <button
                          id="scrollPage"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-scroll-page-button"
                          role="radio"
                          aria-checked="false"
                        >
                          <span data-l10n-id="pdfjs-scroll-page-button-label"></span>
                        </button>
                        <button
                          id="scrollVertical"
                          class="toolbarButton labeled toggled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-scroll-vertical-button"
                          role="radio"
                          aria-checked="true"
                        >
                          <span data-l10n-id="pdfjs-scroll-vertical-button-label"></span>
                        </button>
                        <button
                          id="scrollHorizontal"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-scroll-horizontal-button"
                          role="radio"
                          aria-checked="false"
                        >
                          <span data-l10n-id="pdfjs-scroll-horizontal-button-label"></span>
                        </button>
                        <button
                          id="scrollWrapped"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-scroll-wrapped-button"
                          role="radio"
                          aria-checked="false"
                        >
                          <span data-l10n-id="pdfjs-scroll-wrapped-button-label"></span>
                        </button>
                      </div>

                      <div class="horizontalToolbarSeparator"></div>

                      <div id="spreadModeButtons" role="radiogroup">
                        <button
                          id="spreadNone"
                          class="toolbarButton labeled toggled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-spread-none-button"
                          role="radio"
                          aria-checked="true"
                        >
                          <span data-l10n-id="pdfjs-spread-none-button-label"></span>
                        </button>
                        <button
                          id="spreadOdd"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-spread-odd-button"
                          role="radio"
                          aria-checked="false"
                        >
                          <span data-l10n-id="pdfjs-spread-odd-button-label"></span>
                        </button>
                        <button
                          id="spreadEven"
                          class="toolbarButton labeled"
                          type="button"
                          tabindex="0"
                          data-l10n-id="pdfjs-spread-even-button"
                          role="radio"
                          aria-checked="false"
                        >
                          <span data-l10n-id="pdfjs-spread-even-button-label"></span>
                        </button>
                      </div>

                      <div id="imageAltTextSettingsSeparator" class="horizontalToolbarSeparator hidden"></div>
                      <button
                        id="imageAltTextSettings"
                        type="button"
                        class="toolbarButton labeled hidden"
                        tabindex="0"
                        data-l10n-id="pdfjs-image-alt-text-settings-button"
                        aria-controls="altTextSettingsDialog"
                      >
                        <span data-l10n-id="pdfjs-image-alt-text-settings-button-label"></span>
                      </button>

                      <div class="horizontalToolbarSeparator"></div>

                      <button
                        id="documentProperties"
                        class="toolbarButton labeled"
                        type="button"
                        tabindex="0"
                        data-l10n-id="pdfjs-document-properties-button"
                        aria-controls="documentPropertiesDialog"
                      >
                        <span data-l10n-id="pdfjs-document-properties-button-label"></span>
                      </button>
                    </div>
                  </div>
                  <!-- secondaryToolbar -->
                </div>
              </div>
            </div>
            <div id="loadingBar">
              <div class="progress">
                <div class="glimmer"></div>
              </div>
            </div>
          </div>
        </div>

        <div id="viewerContainer" tabindex="0">
          <div id="viewer" class="pdfViewer"></div>
        </div>
      </div>
      <!-- mainContainer -->

      <div id="dialogContainer">
        <dialog id="passwordDialog">
          <div class="row">
            <label for="password" id="passwordText" data-l10n-id="pdfjs-password-label"></label>
          </div>
          <div class="row">
            <input type="password" id="password" class="toolbarField" />
          </div>
          <div class="buttonRow">
            <button id="passwordCancel" class="dialogButton" type="button"><span data-l10n-id="pdfjs-password-cancel-button"></span></button>
            <button id="passwordSubmit" class="dialogButton" type="button"><span data-l10n-id="pdfjs-password-ok-button"></span></button>
          </div>
        </dialog>
        <dialog id="documentPropertiesDialog">
          <div class="row">
            <span id="fileNameLabel" data-l10n-id="pdfjs-document-properties-file-name"></span>
            <p id="fileNameField" aria-labelledby="fileNameLabel">-</p>
          </div>
          <div class="row">
            <span id="fileSizeLabel" data-l10n-id="pdfjs-document-properties-file-size"></span>
            <p id="fileSizeField" aria-labelledby="fileSizeLabel">-</p>
          </div>
          <div class="separator"></div>
          <div class="row">
            <span id="titleLabel" data-l10n-id="pdfjs-document-properties-title"></span>
            <p id="titleField" aria-labelledby="titleLabel">-</p>
          </div>
          <div class="row">
            <span id="authorLabel" data-l10n-id="pdfjs-document-properties-author"></span>
            <p id="authorField" aria-labelledby="authorLabel">-</p>
          </div>
          <div class="row">
            <span id="subjectLabel" data-l10n-id="pdfjs-document-properties-subject"></span>
            <p id="subjectField" aria-labelledby="subjectLabel">-</p>
          </div>
          <div class="row">
            <span id="keywordsLabel" data-l10n-id="pdfjs-document-properties-keywords"></span>
            <p id="keywordsField" aria-labelledby="keywordsLabel">-</p>
          </div>
          <div class="row">
            <span id="creationDateLabel" data-l10n-id="pdfjs-document-properties-creation-date"></span>
            <p id="creationDateField" aria-labelledby="creationDateLabel">-</p>
          </div>
          <div class="row">
            <span id="modificationDateLabel" data-l10n-id="pdfjs-document-properties-modification-date"></span>
            <p id="modificationDateField" aria-labelledby="modificationDateLabel">-</p>
          </div>
          <div class="row">
            <span id="creatorLabel" data-l10n-id="pdfjs-document-properties-creator"></span>
            <p id="creatorField" aria-labelledby="creatorLabel">-</p>
          </div>
          <div class="separator"></div>
          <div class="row">
            <span id="producerLabel" data-l10n-id="pdfjs-document-properties-producer"></span>
            <p id="producerField" aria-labelledby="producerLabel">-</p>
          </div>
          <div class="row">
            <span id="versionLabel" data-l10n-id="pdfjs-document-properties-version"></span>
            <p id="versionField" aria-labelledby="versionLabel">-</p>
          </div>
          <div class="row">
            <span id="pageCountLabel" data-l10n-id="pdfjs-document-properties-page-count"></span>
            <p id="pageCountField" aria-labelledby="pageCountLabel">-</p>
          </div>
          <div class="row">
            <span id="pageSizeLabel" data-l10n-id="pdfjs-document-properties-page-size"></span>
            <p id="pageSizeField" aria-labelledby="pageSizeLabel">-</p>
          </div>
          <div class="separator"></div>
          <div class="row">
            <span id="linearizedLabel" data-l10n-id="pdfjs-document-properties-linearized"></span>
            <p id="linearizedField" aria-labelledby="linearizedLabel">-</p>
          </div>
          <div class="buttonRow">
            <button id="documentPropertiesClose" class="dialogButton" type="button"><span data-l10n-id="pdfjs-document-properties-close-button"></span></button>
          </div>
        </dialog>
        <dialog class="dialog altText" id="altTextDialog" aria-labelledby="dialogLabel" aria-describedby="dialogDescription">
          <div id="altTextContainer" class="mainContainer">
            <div id="overallDescription">
              <span id="dialogLabel" data-l10n-id="pdfjs-editor-alt-text-dialog-label" class="title"></span>
              <span id="dialogDescription" data-l10n-id="pdfjs-editor-alt-text-dialog-description"></span>
            </div>
            <div id="addDescription">
              <div class="radio">
                <div class="radioButton">
                  <input type="radio" id="descriptionButton" name="altTextOption" tabindex="0" aria-describedby="descriptionAreaLabel" checked />
                  <label for="descriptionButton" data-l10n-id="pdfjs-editor-alt-text-add-description-label"></label>
                </div>
                <div class="radioLabel">
                  <span id="descriptionAreaLabel" data-l10n-id="pdfjs-editor-alt-text-add-description-description"></span>
                </div>
              </div>
              <div class="descriptionArea">
                <textarea id="descriptionTextarea" aria-labelledby="descriptionAreaLabel" data-l10n-id="pdfjs-editor-alt-text-textarea" tabindex="0"></textarea>
              </div>
            </div>
            <div id="markAsDecorative">
              <div class="radio">
                <div class="radioButton">
                  <input type="radio" id="decorativeButton" name="altTextOption" aria-describedby="decorativeLabel" />
                  <label for="decorativeButton" data-l10n-id="pdfjs-editor-alt-text-mark-decorative-label"></label>
                </div>
                <div class="radioLabel">
                  <span id="decorativeLabel" data-l10n-id="pdfjs-editor-alt-text-mark-decorative-description"></span>
                </div>
              </div>
            </div>
            <div id="buttons">
              <button id="altTextCancel" class="secondaryButton" type="button" tabindex="0">
                <span data-l10n-id="pdfjs-editor-alt-text-cancel-button"></span>
              </button>
              <button id="altTextSave" class="primaryButton" type="button" tabindex="0"><span data-l10n-id="pdfjs-editor-alt-text-save-button"></span></button>
            </div>
          </div>
        </dialog>
        <dialog class="dialog newAltText" id="newAltTextDialog" aria-labelledby="newAltTextTitle" aria-describedby="newAltTextDescription" tabindex="0">
          <div id="newAltTextContainer" class="mainContainer">
            <div class="title">
              <span id="newAltTextTitle" data-l10n-id="pdfjs-editor-new-alt-text-dialog-edit-label" role="sectionhead" tabindex="0"></span>
            </div>
            <div id="mainContent">
              <div id="descriptionAndSettings">
                <div id="descriptionInstruction">
                  <div id="newAltTextDescriptionContainer">
                    <div class="altTextSpinner" role="status" aria-live="polite"></div>
                    <textarea
                      id="newAltTextDescriptionTextarea"
                      aria-labelledby="descriptionAreaLabel"
                      data-l10n-id="pdfjs-editor-new-alt-text-textarea"
                      tabindex="0"
                    ></textarea>
                  </div>
                  <span id="newAltTextDescription" role="note" data-l10n-id="pdfjs-editor-new-alt-text-description"></span>
                  <div id="newAltTextDisclaimer" role="note">
                    <div>
                      <span data-l10n-id="pdfjs-editor-new-alt-text-disclaimer1"></span>
                      <a
                        href="https://support.mozilla.org/en-US/kb/pdf-alt-text"
                        target="_blank"
                        rel="noopener noreferrer"
                        id="newAltTextLearnMore"
                        data-l10n-id="pdfjs-editor-new-alt-text-disclaimer-learn-more-url"
                        tabindex="0"
                      ></a>
                    </div>
                  </div>
                </div>
                <div id="newAltTextCreateAutomatically" class="toggler">
                  <button id="newAltTextCreateAutomaticallyButton" class="toggle-button" type="button" aria-pressed="true" tabindex="0"></button>
                  <label
                    for="newAltTextCreateAutomaticallyButton"
                    class="togglerLabel"
                    data-l10n-id="pdfjs-editor-new-alt-text-create-automatically-button-label"
                  ></label>
                </div>
                <div id="newAltTextDownloadModel" class="hidden">
                  <span
                    id="newAltTextDownloadModelDescription"
                    data-l10n-id="pdfjs-editor-new-alt-text-ai-model-downloading-progress"
                    aria-valuemin="0"
                    data-l10n-args='{ "totalSize": 0, "downloadedSize": 0 }'
                  ></span>
                </div>
              </div>
              <div id="newAltTextImagePreview"></div>
            </div>
            <div id="newAltTextError" class="messageBar">
              <div>
                <div>
                  <span class="title" data-l10n-id="pdfjs-editor-new-alt-text-error-title"></span>
                  <span class="description" data-l10n-id="pdfjs-editor-new-alt-text-error-description"></span>
                </div>
                <button id="newAltTextCloseButton" class="closeButton" type="button" tabindex="0">
                  <span data-l10n-id="pdfjs-editor-new-alt-text-error-close-button"></span>
                </button>
              </div>
            </div>
            <div id="newAltTextButtons" class="dialogButtonsGroup">
              <button id="newAltTextCancel" type="button" class="secondaryButton hidden" tabindex="0">
                <span data-l10n-id="pdfjs-editor-alt-text-cancel-button"></span>
              </button>
              <button id="newAltTextNotNow" type="button" class="secondaryButton" tabindex="0">
                <span data-l10n-id="pdfjs-editor-new-alt-text-not-now-button"></span>
              </button>
              <button id="newAltTextSave" type="button" class="primaryButton" tabindex="0">
                <span data-l10n-id="pdfjs-editor-alt-text-save-button"></span>
              </button>
            </div>
          </div>
        </dialog>

        <dialog class="dialog" id="altTextSettingsDialog" aria-labelledby="altTextSettingsTitle">
          <div id="altTextSettingsContainer" class="mainContainer">
            <div class="title">
              <span id="altTextSettingsTitle" data-l10n-id="pdfjs-editor-alt-text-settings-dialog-label" role="sectionhead" tabindex="0" class="title"></span>
            </div>
            <div id="automaticAltText">
              <span data-l10n-id="pdfjs-editor-alt-text-settings-automatic-title"></span>
              <div id="automaticSettings">
                <div id="createModelSetting">
                  <div class="toggler">
                    <button id="createModelButton" type="button" class="toggle-button" aria-pressed="true" tabindex="0"></button>
                    <label for="createModelButton" class="togglerLabel" data-l10n-id="pdfjs-editor-alt-text-settings-create-model-button-label"></label>
                  </div>
                  <div id="createModelDescription" class="description">
                    <span data-l10n-id="pdfjs-editor-alt-text-settings-create-model-description"></span>
                    <a
                      href="https://support.mozilla.org/en-US/kb/pdf-alt-text"
                      target="_blank"
                      rel="noopener noreferrer"
                      id="altTextSettingsLearnMore"
                      data-l10n-id="pdfjs-editor-new-alt-text-disclaimer-learn-more-url"
                      tabindex="0"
                    ></a>
                  </div>
                </div>
                <div id="aiModelSettings">
                  <div>
                    <span data-l10n-id="pdfjs-editor-alt-text-settings-download-model-label" data-l10n-args='{ "totalSize": 180 }'></span>
                    <div id="aiModelDescription" class="description">
                      <span data-l10n-id="pdfjs-editor-alt-text-settings-ai-model-description"></span>
                    </div>
                  </div>
                  <button id="deleteModelButton" type="button" class="secondaryButton" tabindex="0">
                    <span data-l10n-id="pdfjs-editor-alt-text-settings-delete-model-button"></span>
                  </button>
                  <button id="downloadModelButton" type="button" class="secondaryButton" tabindex="0">
                    <span data-l10n-id="pdfjs-editor-alt-text-settings-download-model-button"></span>
                  </button>
                </div>
              </div>
            </div>
            <div class="dialogSeparator"></div>
            <div id="altTextEditor">
              <span data-l10n-id="pdfjs-editor-alt-text-settings-editor-title"></span>
              <div id="showAltTextEditor">
                <div class="toggler">
                  <button id="showAltTextDialogButton" type="button" class="toggle-button" aria-pressed="true" tabindex="0"></button>
                  <label for="showAltTextDialogButton" class="togglerLabel" data-l10n-id="pdfjs-editor-alt-text-settings-show-dialog-button-label"></label>
                </div>
                <div id="showAltTextDialogDescription" class="description">
                  <span data-l10n-id="pdfjs-editor-alt-text-settings-show-dialog-description"></span>
                </div>
              </div>
            </div>
            <div id="buttons" class="dialogButtonsGroup">
              <button id="altTextSettingsCloseButton" type="button" class="primaryButton" tabindex="0">
                <span data-l10n-id="pdfjs-editor-alt-text-settings-close-button"></span>
              </button>
            </div>
          </div>
        </dialog>

        <dialog class="dialog signatureDialog" id="addSignatureDialog" aria-labelledby="addSignatureDialogLabel">
          <span id="addSignatureDialogLabel" data-l10n-id="pdfjs-editor-add-signature-dialog-label"></span>
          <div id="addSignatureContainer" class="mainContainer">
            <div class="title">
              <span role="sectionhead" data-l10n-id="pdfjs-editor-add-signature-dialog-title" tabindex="0"></span>
            </div>
            <div role="tablist" id="addSignatureOptions">
              <button
                id="addSignatureTypeButton"
                type="button"
                role="tab"
                aria-selected="true"
                aria-controls="addSignatureTypeContainer"
                data-l10n-id="pdfjs-editor-add-signature-type-button"
                tabindex="0"
              ></button>
              <button
                id="addSignatureDrawButton"
                type="button"
                role="tab"
                aria-selected="false"
                aria-controls="addSignatureDrawContainer"
                data-l10n-id="pdfjs-editor-add-signature-draw-button"
                tabindex="0"
              ></button>
              <button
                id="addSignatureImageButton"
                type="button"
                role="tab"
                aria-selected="false"
                aria-controls="addSignatureImageContainer"
                data-l10n-id="pdfjs-editor-add-signature-image-button"
                tabindex="-1"
              ></button>
            </div>
            <div id="addSignatureActionContainer" data-selected="type">
              <div id="addSignatureTypeContainer" role="tabpanel" aria-labelledby="addSignatureTypeContainer">
                <input id="addSignatureTypeInput" type="text" data-l10n-id="pdfjs-editor-add-signature-type-input" tabindex="0" />
              </div>
              <div id="addSignatureDrawContainer" role="tabpanel" aria-labelledby="addSignatureDrawButton" tabindex="-1">
                <svg id="addSignatureDraw" xmlns="http://www.w3.org/2000/svg" aria-labelledby="addSignatureDrawPlaceholder"></svg>
                <span id="addSignatureDrawPlaceholder" data-l10n-id="pdfjs-editor-add-signature-draw-placeholder"></span>
                <div id="thickness">
                  <div>
                    <label for="addSignatureDrawThickness" data-l10n-id="pdfjs-editor-add-signature-draw-thickness-range-label"></label>
                    <input
                      type="range"
                      id="addSignatureDrawThickness"
                      min="1"
                      max="5"
                      step="1"
                      value="1"
                      data-l10n-id="pdfjs-editor-add-signature-draw-thickness-range"
                      data-l10n-args='{ "thickness": 1 }'
                      tabindex="0"
                    />
                  </div>
                </div>
              </div>
              <div id="addSignatureImageContainer" role="tabpanel" aria-labelledby="addSignatureImageButton" tabindex="-1">
                <svg id="addSignatureImage" xmlns="http://www.w3.org/2000/svg" aria-labelledby="addSignatureImagePlaceholder"></svg>
                <div id="addSignatureImagePlaceholder">
                  <span data-l10n-id="pdfjs-editor-add-signature-image-placeholder"></span>
                  <label id="addSignatureImageBrowse" for="addSignatureFilePicker" tabindex="0">
                    <a data-l10n-id="pdfjs-editor-add-signature-image-browse-link"></a>
                  </label>
                  <input id="addSignatureFilePicker" type="file" />
                </div>
              </div>
              <div id="addSignatureControls">
                <div id="horizontalContainer">
                  <div id="addSignatureDescriptionContainer">
                    <label for="addSignatureDescInput" data-l10n-id="pdfjs-editor-add-signature-description-label"></label>
                    <span id="addSignatureDescription" class="inputWithClearButton">
                      <input id="addSignatureDescInput" type="text" data-l10n-id="pdfjs-editor-add-signature-description-input" tabindex="0" />
                      <button class="clearInputButton" type="button" tabindex="0" aria-hidden="true"></button>
                    </span>
                  </div>
                  <button id="clearSignatureButton" type="button" data-l10n-id="pdfjs-editor-add-signature-clear-button" tabindex="0">
                    <span data-l10n-id="pdfjs-editor-add-signature-clear-button-label"></span>
                  </button>
                </div>
                <div id="addSignatureSaveContainer">
                  <input type="checkbox" id="addSignatureSaveCheckbox" />
                  <label for="addSignatureSaveCheckbox" data-l10n-id="pdfjs-editor-add-signature-save-checkbox"></label>
                  <span></span>
                  <span id="addSignatureSaveWarning" data-l10n-id="pdfjs-editor-add-signature-save-warning-message"></span>
                </div>
              </div>
              <div id="addSignatureError" hidden="true" class="messageBar">
                <div>
                  <div>
                    <span id="addSignatureErrorTitle" class="title" data-l10n-id="pdfjs-editor-add-signature-image-upload-error-title"></span>
                    <span id="addSignatureErrorDescription" class="description" data-l10n-id="pdfjs-editor-add-signature-image-upload-error-description"></span>
                  </div>
                  <button id="addSignatureErrorCloseButton" class="closeButton" type="button" tabindex="0">
                    <span data-l10n-id="pdfjs-editor-add-signature-error-close-button"></span>
                  </button>
                </div>
              </div>
              <div class="dialogButtonsGroup">
                <button id="addSignatureCancelButton" type="button" class="secondaryButton" tabindex="0">
                  <span data-l10n-id="pdfjs-editor-add-signature-cancel-button"></span>
                </button>
                <button id="addSignatureAddButton" type="button" class="primaryButton" disabled tabindex="0">
                  <span data-l10n-id="pdfjs-editor-add-signature-add-button"></span>
                </button>
              </div>
            </div>
          </div>
        </dialog>

        <dialog class="dialog signatureDialog" id="editSignatureDescriptionDialog" aria-labelledby="editSignatureDescriptionTitle">
          <div id="editSignatureDescriptionContainer" class="mainContainer">
            <div class="title">
              <span id="editSignatureDescriptionTitle" role="sectionhead" data-l10n-id="pdfjs-editor-edit-signature-dialog-title" tabindex="0"></span>
            </div>
            <div id="editSignatureDescriptionAndView">
              <div id="editSignatureDescriptionContainer">
                <label for="editSignatureDescInput" data-l10n-id="pdfjs-editor-add-signature-description-label"></label>
                <span id="editSignatureDescription" class="inputWithClearButton">
                  <input id="editSignatureDescInput" type="text" data-l10n-id="pdfjs-editor-add-signature-description-input" tabindex="0" />
                  <button class="clearInputButton" type="button" tabindex="0" aria-hidden="true"></button>
                </span>
              </div>
              <svg id="editSignatureView" xmlns="http://www.w3.org/2000/svg"></svg>
            </div>
            <div class="dialogButtonsGroup">
              <button id="editSignatureCancelButton" type="button" class="secondaryButton" tabindex="0">
                <span data-l10n-id="pdfjs-editor-add-signature-cancel-button"></span>
              </button>
              <button id="editSignatureUpdateButton" type="button" class="primaryButton" disabled tabindex="0">
                <span data-l10n-id="pdfjs-editor-edit-signature-update-button"></span>
              </button>
            </div>
          </div>
        </dialog>

        <dialog class="dialog commentManager" id="commentManagerDialog" aria-labelledby="commentManagerTitle">
          <div class="mainContainer">
            <div class="title" id="commentManagerToolbar">
              <span id="commentManagerTitle" role="sectionhead" data-l10n-id="pdfjs-editor-edit-comment-dialog-title-when-adding"></span>
            </div>
            <textarea id="commentManagerTextInput" data-l10n-id="pdfjs-editor-edit-comment-dialog-text-input" tabindex="0"></textarea>
            <div class="dialogButtonsGroup">
              <button id="commentManagerCancelButton" type="button" class="secondaryButton" tabindex="0">
                <span data-l10n-id="pdfjs-editor-edit-comment-dialog-cancel-button"></span>
              </button>
              <button id="commentManagerSaveButton" type="button" class="primaryButton" disabled tabindex="0">
                <span data-l10n-id="pdfjs-editor-edit-comment-dialog-save-button-when-adding"></span>
              </button>
            </div>
          </div>
        </dialog>

        <dialog id="printServiceDialog" style="min-width: 200px">
          <div class="row">
            <span data-l10n-id="pdfjs-print-progress-message"></span>
          </div>
          <div class="row">
            <progress value="0" max="100"></progress>
            <span data-l10n-id="pdfjs-print-progress-percent" data-l10n-args='{ "progress": 0 }' class="relative-progress">0%</span>
          </div>
          <div class="buttonRow">
            <button id="printCancel" class="dialogButton" type="button"><span data-l10n-id="pdfjs-print-progress-close-button"></span></button>
          </div>
        </dialog>
      </div>
      <!-- dialogContainer -->

      <div id="editorUndoBar" class="messageBar" role="status" aria-labelledby="editorUndoBarMessage" tabindex="-1" hidden>
        <div>
          <div>
            <span id="editorUndoBarMessage" class="description"></span>
          </div>
          <button id="editorUndoBarUndoButton" class="undoButton" type="button" tabindex="0" data-l10n-id="pdfjs-editor-undo-bar-undo-button">
            <span data-l10n-id="pdfjs-editor-undo-bar-undo-button-label"></span>
          </button>
          <button id="editorUndoBarCloseButton" class="closeButton" type="button" tabindex="0" data-l10n-id="pdfjs-editor-undo-bar-close-button">
            <span data-l10n-id="pdfjs-editor-undo-bar-close-button-label"></span>
          </button>
        </div>
      </div>
      <!-- editorUndoBar -->
    </div>
    <!-- outerContainer -->
    <div id="printContainer"></div>
    
    
      
    <!-- ozel toolbar -->
       <!-- ozel toolbar -->
          <!-- ozel toolbar -->
             <!-- ozel toolbar -->
         
         
         <!-- ozel toolbar -->

<style>
/* ===== GLOBAL THEME VARIABLES (ki toolbar'n kaynamas iin genele alnd) ===== */
[data-theme="light"] {
    --toolbar-bg: #f5f5f5;
    --text-color: #333;
    --border-color: #ddd;
    --icon-color: #333;
    --button-hover-bg: rgba(0, 0, 0, 0.1);
}

[data-theme="dark"] {
    --toolbar-bg: #2d2d2d;
    --text-color: #fff;
    --border-color: #404040;
    --icon-color: #fff;
    --button-hover-bg: rgba(255, 255, 255, 0.1);
}

/* ===== CUSTOM TOP TOOLBAR (PART A) ===== */
#customToolbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 35px;
    display: flex;
    align-items: center;
    padding: 0 16px;
    z-index: 10000;
    /* GLGE VE ALT ZG KALDIRILDI (B ile birlemesi iin) */
    box-shadow: none;
    border-bottom: none; 
    
    padding-top: env(safe-area-inset-top);
    padding-left: calc(16px + env(safe-area-inset-left));
    padding-right: calc(16px + env(safe-area-inset-right));
    background: var(--toolbar-bg);
    color: var(--text-color);
}

#customBackButton {
    background: none;
    border: none;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16px;
    flex-shrink: 0;
    transition: background-color 0.2s;
    color: var(--icon-color);
}

#customBackButton:hover, #customBackButton:active { background-color: var(--button-hover-bg); }

#customTitle {
    flex: 1;
    font-size: 16px;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 8px;
    text-align: center;
    color: var(--text-color);
}

#customActions { display: flex; gap: 8px; flex-shrink: 0; }

.custom-action-btn {
    background: none;
    border: none;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
    color: var(--icon-color);
}

.custom-action-btn:hover, .custom-action-btn:active { background-color: var(--button-hover-bg); }

/* Orijinal Container Ayar */
#outerContainer {
    position: absolute;
    top: 35px !important; /* Custom Toolbar ykseklii */
    height: calc(100vh - 56px) !important;
    width: 100%;
    padding: 0 !important;
    margin: 0 !important;
}

@font-face {
    font-family: 'Material Symbols Rounded Local';
    src: local('Material Symbols Rounded'), url('fonts/MaterialSymbolsRounded.woff2') format('woff2');
    font-weight: 100 700;
    font-style: normal;
    font-display: block;
}

.material-symbols-rounded {
    font-family: 'Material Symbols Rounded Local', 'Material Symbols Rounded', system-ui, sans-serif;
    font-weight: 400;
    font-style: normal;
    font-size: 24px;
    display: inline-block;
    line-height: 1;
    letter-spacing: normal;
    word-wrap: normal;
    white-space: nowrap;
    direction: ltr;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Orijinal PDF.js elemanlarnn konumlar */
#viewerContainer { top: 32px !important; height: calc(100% - 32px) !important; }

/* Print Dialog Stili */
#printDialogOverlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex; align-items: center; justify-content: center;
    z-index: 20000; padding: 20px;
}

#printDialog {
    background: var(--dialog-bg, white);
    border-radius: 12px; padding: 24px;
    max-width: 320px; width: 100%;
    text-align: center; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    animation: dialogFadeIn 0.3s ease;
    color: var(--dialog-text, #333);
}

[data-theme="light"] #printDialog {
    --dialog-bg: white; --dialog-text: #333; --dialog-secondary-text: #666;
    --dialog-btn-bg: #4285f4; --dialog-btn-hover: #3367d6;
    --dialog-btn-cancel-bg: #f0f0f0; --dialog-btn-cancel-text: #666;
}

[data-theme="dark"] #printDialog {
    --dialog-bg: #333; --dialog-text: #fff; --dialog-secondary-text: #ccc;
    --dialog-btn-bg: #4285f4; --dialog-btn-hover: #3367d6;
    --dialog-btn-cancel-bg: #444; --dialog-btn-cancel-text: #ccc;
}

@keyframes dialogFadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
.print-icon-large { font-size: 48px; color: #4285f4; margin-bottom: 16px; display: block; }
.dialog-buttons { display: flex; gap: 12px; }
.dialog-btn { flex: 1; padding: 12px 20px; border: none; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; }
#confirmPrintBtn { background: var(--dialog-btn-bg); color: white; }
#cancelPrintBtn { background: var(--dialog-btn-cancel-bg); color: var(--dialog-btn-cancel-text); }

/* A, Yazdr, ndir, Metin Seme ve El Aracn (Kesin zm) Gizle */
#openFile, #secondaryOpenFile, 
#print, #secondaryPrint, 
#download, #secondaryDownload,
#cursorSelectTool, #secondaryCursorSelectTool,
#cursorHandTool, #secondaryCursorHandTool,
#handTool, #secondaryHandTool {
    display: none !important;
}
</style>

<div id="customToolbar">
    <button id="customBackButton" onclick="goBackToIndex()">
        <span class="material-symbols-rounded">arrow_back</span>
    </button>
    <div id="customTitle">PDF Ykleniyor...</div>
    <div id="customActions">
        <button class="custom-action-btn" id="customSaveBtn" onclick="downloadPDF()" title="Kaydet">
            <span class="material-symbols-rounded">download</span>
        </button>
        <button class="custom-action-btn" id="customPrintBtn" onclick="printWithWebShare()" title="Yazdr">
            <span class="material-symbols-rounded">print</span>
        </button>
        <button class="custom-action-btn" id="customShareBtn" onclick="sharePDF()" title="Payla">
            <span class="material-symbols-rounded">share</span>
        </button>
    </div>
</div>

<div id="printDialogOverlay" style="display: none;">
    <div id="printDialog">
        <span class="material-symbols-rounded print-icon-large">print</span>
        <h3>Yazdr</h3>
        <p class="print-message">Alacak pencerede <b>yazc simgesini</b> seiniz</p>
        <div class="dialog-buttons">
            <button id="cancelPrintBtn" class="dialog-btn" onclick="hidePrintDialog()">ptal</button>
            <button id="confirmPrintBtn" class="dialog-btn" onclick="triggerWebSharePrint()">Tamam</button>
        </div>
    </div>
</div>


         
         
       <!-- ozel toolbar -->
          <!-- ozel toolbar -->
          
          
     
<script>

// =============================================================================
// VIEWER INDEXEDDB PDF MANAGER - ARRAYBUFFER KULLANIMI
// =============================================================================

class ViewerIndexedDBPdfManager {
    constructor() {
        this.db = null;
        this.dbName = 'PDFReaderDB';
        this.storeName = 'pdfs';
        this.isInitialized = false;
        this.currentPdfName = '';
    }

    async init() {
        return new Promise((resolve, reject) => {
            const request = indexedDB.open(this.dbName, 1);
            
            request.onerror = () => {
                console.error(" IndexedDB alamad");
                resolve(false);
            };
            
            request.onsuccess = (event) => {
                this.db = event.target.result;
                this.isInitialized = true;
                console.log(" Viewer IndexedDB balatld");
                resolve(true);
            };
            
            request.onupgradeneeded = (event) => {
                const db = event.target.result;
                if (!db.objectStoreNames.contains(this.storeName)) {
                    db.createObjectStore(this.storeName, { keyPath: 'id' });
                }
            };
        });
    }

    async getPdfDataFromStorage() {
        try {
            let usingIndexedDB = sessionStorage.getItem('usingIndexedDB') === 'true';
            let pdfName = sessionStorage.getItem('currentPdfName');
            
            //  Session storage bosa, local storage'dan al
            if (!usingIndexedDB || !pdfName) {
                console.log(" Session storage bo, local storage kontrol ediliyor...");
                
                pdfName = localStorage.getItem('lastPdfName');
                const method = localStorage.getItem('lastPdfMethod');
                
                if (pdfName && method === 'indexeddb') {
                    usingIndexedDB = true;
                    
                    sessionStorage.setItem('currentPdfName', pdfName);
                    sessionStorage.setItem('usingIndexedDB', 'true');
                    
                    console.log(" Local storage'dan veri alnd:", pdfName);
                }
            }
            
            pdfName = pdfName || "belge.pdf";
            
            console.log(` PDF verisi aranyor: ${pdfName}`);
            console.log(` Depo tr: IndexedDB=${usingIndexedDB}`);
            
            //  IndexedDB'den ArrayBuffer olarak al
            if (usingIndexedDB && this.isInitialized) {
                console.log(" IndexedDB'den ArrayBuffer ykleniyor...");
                return await this.getFromIndexedDB(pdfName);
            }
            
            return null;
        } catch (error) {
            console.error(" PDF verisi alnrken hata:", error);
            return null;
        }
    }

    async getFromIndexedDB(pdfName) {
        return new Promise((resolve, reject) => {
            const transaction = this.db.transaction([this.storeName], 'readonly');
            const store = transaction.objectStore(this.storeName);
            
            let request = store.get(pdfName);
            
            request.onsuccess = (e) => {
                let result = e.target.result;
                
                if (!result) {
                    const currentRequest = store.get('current');
                    
                    currentRequest.onsuccess = (e2) => {
                        result = e2.target.result;
                        
                        if (result && result.data) {
                            this.processIndexedDBResult(result, pdfName, resolve, reject);
                        } else {
                            reject(new Error("PDF IndexedDB'de bulunamad"));
                        }
                    };
                    
                    currentRequest.onerror = () => {
                        reject(new Error("IndexedDB okuma hatas"));
                    };
                    
                } else if (result && result.data) {
                    this.processIndexedDBResult(result, pdfName, resolve, reject);
                } else {
                    reject(new Error("PDF IndexedDB'de bulunamad"));
                }
            };
            
            request.onerror = () => {
                reject(new Error("IndexedDB okuma hatas"));
            };
        });
    }

    processIndexedDBResult(result, pdfName, resolve, reject) {
        const sizeInMB = result.size / (1024 * 1024);
        console.log(` IndexedDB'den bulundu: ${pdfName} (${sizeInMB.toFixed(2)} MB)`);
        
        //  ArrayBuffer olarak dndr (Blob URL yerine)
        resolve({
            data: result.data, // ArrayBuffer
            name: pdfName,
            isBlob: false,
            isArrayBuffer: true,
            method: 'indexeddb-arraybuffer',
            size: result.size
        });
    }

    async saveUpdatedPdf(arrayBuffer) {
        try {
            const usingIndexedDB = sessionStorage.getItem('usingIndexedDB') === 'true';
            const pdfName = sessionStorage.getItem('currentPdfName') || "belge.pdf";
            
            const sizeInMB = arrayBuffer.byteLength / (1024 * 1024);
            console.log(` PDF gncelleniyor: ${pdfName} (${sizeInMB.toFixed(2)} MB)`);
            
            if (usingIndexedDB && this.isInitialized) {
                return await this.saveToIndexedDB(arrayBuffer, pdfName);
            } else {
                return await this.saveToIndexedDB(arrayBuffer, pdfName);
            }
            
        } catch (error) {
            console.error(" PDF gncelleme hatas:", error);
            return { success: false, error: error.message };
        }
    }

    async saveToIndexedDB(arrayBuffer, pdfName) {
        return new Promise((resolve, reject) => {
            const transaction = this.db.transaction([this.storeName], 'readwrite');
            const store = transaction.objectStore(this.storeName);
            
            const fileData = {
                id: pdfName,
                name: pdfName,
                data: arrayBuffer,
                size: arrayBuffer.byteLength,
                timestamp: Date.now()
            };
            
            const request = store.put(fileData);
            
            request.onsuccess = () => {
                const currentData = {
                    id: 'current',
                    name: pdfName,
                    data: arrayBuffer,
                    size: arrayBuffer.byteLength,
                    timestamp: Date.now()
                };
                
                const currentRequest = store.put(currentData);
                
                currentRequest.onsuccess = () => {
                    sessionStorage.setItem('usingIndexedDB', 'true');
                    
                    console.log(` PDF IndexedDB'ye kaydedildi: ${pdfName}`);
                    resolve({ success: true, name: pdfName, method: 'indexeddb' });
                };
                
                currentRequest.onerror = () => {
                    console.log(" current kaydedilemedi, ana kayt baarl");
                    resolve({ success: true, name: pdfName, method: 'indexeddb' });
                };
            };
            
            request.onerror = () => {
                reject(new Error("IndexedDB kayt hatas"));
            };
        });
    }

    async cleanup() {
        try {
            console.log(" Viewer temizlendi");
        } catch (e) {
            console.error(" Temizleme hatas:", e);
        }
    }
}

const viewerPdfManager = new ViewerIndexedDBPdfManager();

console.log(" Viewer IndexedDB PDF Manager yklendi");

// =============================================================================
// VER YNETM VE DZENLEME YAKALAMA
// =============================================================================

async function getUpdatedPdfData() {
    try {
        if (window.PDFViewerApplication && window.PDFViewerApplication.pdfDocument) {
            console.log(" PDF dzenlemeleri kaydediliyor...");
            const arrayBuffer = await window.PDFViewerApplication.pdfDocument.saveDocument();
            
            const result = await viewerPdfManager.saveUpdatedPdf(arrayBuffer);
            
            if (result.success) {
                console.log(` PDF gncellendi (${result.method}): ${result.name}`);
                
                const pdfInfo = await viewerPdfManager.getPdfDataFromStorage();
                return pdfInfo;
            } else {
                console.error(" PDF gncellenemedi:", result.error);
                return await viewerPdfManager.getPdfDataFromStorage();
            }
        }
    } catch (e) { 
        console.error(" PDF gncelleme hatas:", e); 
    }
    return await viewerPdfManager.getPdfDataFromStorage();
}

// =============================================================================
// GRNM VE TEMA AYARLARI
// =============================================================================

function initCustomToolbarTheme() {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

    const applyTheme = (e) => {
        const themeToSet = e.matches ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', themeToSet);
        updatePDFViewerTheme(themeToSet);
    };

    applyTheme(mediaQuery);
    mediaQuery.addEventListener('change', applyTheme);
}

function updatePDFViewerTheme(theme) {
    const style = document.createElement('style');
    style.id = 'pdfjs-theme-override';
    
    if (theme === 'dark') {
        style.innerHTML = `
            .textLayer {
                filter: invert(1) hue-rotate(180deg);
                mix-blend-mode: difference;
            }
            .annotationLayer section {
                filter: invert(1) hue-rotate(180deg);
            }
            .pdfViewer .page {
                background-color: #1e1e1e !important;
                border-color: #444 !important;
            }
        `;
    } else {
        style.innerHTML = `
            .textLayer {
                filter: none;
                mix-blend-mode: normal;
            }
            .annotationLayer section {
                filter: none;
            }
            .pdfViewer .page {
                background-color: white !important;
                border-color: #ddd !important;
            }
        `;
    }
    
    const oldStyle = document.getElementById('pdfjs-theme-override');
    if (oldStyle) oldStyle.remove();
    
    document.head.appendChild(style);
}

function updateToolbarTitle() {
    const pdfName = sessionStorage.getItem('currentPdfName') || "belge.pdf";
    const titleElement = document.getElementById('customTitle');
    if (titleElement) {
        titleElement.textContent = pdfName;
    }
}

function applyTextFix() {
    const style = document.createElement('style');
    style.innerHTML = `
        #toolbarContainer {
            top: 0 !important;
            position: absolute !important;
            background-color: var(--toolbar-bg) !important;
            background-image: none !important;
            border-top: none !important;
            border-bottom: 1px solid var(--border-color) !important;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5) !important;
        }
        #toolbarViewer, .toolbarViewerMiddle {
            background: none !important;
        }
        .toolbarLabel, #numPages, #pageNumber, .secondaryToolbarButton span, #sidebarContent span {
            color: var(--text-color, #333) !important; 
            visibility: visible !important;
            display: inline-block !important; 
            opacity: 1 !important; 
            font-size: 12px !important;
        }
        #viewerContainer { top: 32px !important; }
        #sidebarContainer { top: 0 !important; }
        .toolbarButton::before {
             filter: none !important;
             color: var(--icon-color) !important;
             opacity: 1 !important;
        }
        .toolbarButton svg {
            fill: var(--icon-color) !important;
        }
        :root[data-theme="dark"] {
            --toolbar-bg: #1e293b;
            --border-color: #334155;
            --text-color: #f8fafc;
            --icon-color: #cbd5e1;
        }
        :root[data-theme="light"] {
            --toolbar-bg: #ffffff;
            --border-color: #d4d4d4;
            --text-color: #0f172a;
            --icon-color: #64748b;
        }
    `;
    document.head.appendChild(style);
}

// =============================================================================
// PDF YKLEME SREC (ARRAYBUFFER)
// =============================================================================

async function loadPdfIntoViewer() {
    try {
        if (typeof PDFViewerApplicationOptions !== 'undefined') {
            PDFViewerApplicationOptions.set('disableLocalization', true);
        }
        
        console.log(" PDF ykleme balatlyor...");
        
        await viewerPdfManager.init();
        
        const pdfInfo = await viewerPdfManager.getPdfDataFromStorage();
        
        if (pdfInfo && window.PDFViewerApplication) {
            console.log(` PDF alyor: ${pdfInfo.name} (${pdfInfo.method})`);
            
            showLoadingIndicator();
            
            //  ArrayBuffer' direkt kullan
            if (pdfInfo.isArrayBuffer && pdfInfo.data instanceof ArrayBuffer) {
                console.log(" ArrayBuffer kullanlyor");
                
                PDFViewerApplication.open({ 
                    data: new Uint8Array(pdfInfo.data),
                    originalUrl: pdfInfo.name 
                }).then(() => {
                    updateToolbarTitle();
                    applyTextFix();
                    
                    const theme = document.documentElement.getAttribute('data-theme') || 'light';
                    updatePDFViewerTheme(theme);
                    
                    hideLoadingIndicator();
                    
                    console.log(" PDF baaryla yklendi");
                    
                }).catch(error => {
                    console.error(" PDF ama hatas:", error);
                    hideLoadingIndicator();
                    alert("PDF alamad: " + error.message);
                });
            } else {
                console.error(" Geersiz PDF verisi");
                hideLoadingIndicator();
                alert("PDF verisi geersiz");
            }
        } else {
            console.log(" PDF verisi bekleniyor...");
            showLoadingIndicator();
            setTimeout(loadPdfIntoViewer, 500);
        }
    } catch (error) {
        console.error(" PDF ykleme hatas:", error);
        hideLoadingIndicator();
        alert("PDF yklenemedi: " + error.message);
    }
}

function showLoadingIndicator() {
    let indicator = document.getElementById('loadingIndicator');
    if (!indicator) {
        indicator = document.createElement('div');
        indicator.id = 'loadingIndicator';
        indicator.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        `;
        indicator.innerHTML = `
            <div class="spinner"></div>
            <div>PDF ykleniyor...</div>
        `;
        document.body.appendChild(indicator);
        
        const style = document.createElement('style');
        style.innerHTML = `
            .spinner {
                width: 40px;
                height: 40px;
                border: 4px solid #f3f3f3;
                border-top: 4px solid #3498db;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);
    }
    indicator.style.display = 'flex';
}

function hideLoadingIndicator() {
    const indicator = document.getElementById('loadingIndicator');
    if (indicator) {
        indicator.style.display = 'none';
    }
}

// =============================================================================
// NAVIGATION & EXIT FUNCTIONS
// =============================================================================

function goBackToIndex() {
    cleanupBeforeExit();
    window.location.href = 'index.html';
}

function cleanupBeforeExit() {
    try {
        viewerPdfManager.cleanup();
        
        if (window.PDFViewerApplication) {
            try {
                PDFViewerApplication.close();
            } catch (e) {
                console.log(" PDF viewer kapatlamad:", e);
            }
        }
        
        console.log(" Viewer temizlendi, index.html'ye ynlendiriliyor...");
    } catch (error) {
        console.error(" k temizleme hatas:", error);
    }
}

// =============================================================================
// NATIVE & BROWSER FONKSYONLAR - ARRAYBUFFER  BASE64 DNMLER
// =============================================================================

async function sharePDF() {
    const pdfInfo = await getUpdatedPdfData();
    if (!pdfInfo) {
        alert("PDF verisi bulunamad.");
        return;
    }

    if (window.flutter_inappwebview && window.flutter_inappwebview.callHandler) {
        try {
            console.log(" PDF paylalyor (Flutter - Base64)...");
            
            // ArrayBuffer' base64'e evir
            const base64 = await arrayBufferToBase64(pdfInfo.data);
            
            // Flutter'a base64 string gnder
            await window.flutter_inappwebview.callHandler(
                'sharePdfBase64', 
                base64, 
                pdfInfo.name
            );
            
            console.log(" PDF paylald");
            
        } catch (e) {
            console.error(" Paylama hatas:", e);
            alert("PDF paylama hatas: " + e.message);
        }
    } 
    else if (navigator.share) {
        try {
            const blob = new Blob([pdfInfo.data], { type: 'application/pdf' });
            const file = new File([blob], pdfInfo.name, { type: 'application/pdf' });
            await navigator.share({ files: [file], title: pdfInfo.name });
        } catch (e) { 
            console.error(" Web Share hatas:", e);
            alert("Paylam bu taraycda desteklenmiyor."); 
        }
    } else { 
        alert("Paylam zellii bu cihazda aktif deil."); 
    }
}

async function downloadPDF() {
    const pdfInfo = await getUpdatedPdfData();
    if (!pdfInfo) {
        alert("PDF verisi bulunamad.");
        return;
    }

    if (window.flutter_inappwebview && window.flutter_inappwebview.callHandler) {
        try {
            console.log(" PDF indiriliyor (Flutter - Base64)...");
            
            // ArrayBuffer' base64'e evir
            const base64 = await arrayBufferToBase64(pdfInfo.data);
            
            // Flutter'a base64 string gnder
            await window.flutter_inappwebview.callHandler(
                'downloadPdfBase64', 
                base64, 
                pdfInfo.name
            );
            
            console.log(" PDF indirildi");
            
        } catch (e) {
            console.error(" ndirme hatas:", e);
            alert("PDF indirme hatas: " + e.message);
        }
    } 
    else {
        // Browser fallback
        const blob = new Blob([pdfInfo.data], { type: 'application/pdf' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = pdfInfo.name;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        URL.revokeObjectURL(url);
        
        if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
            alert("PDF indirildi. Dosyanz 'Dosyalar' uygulamasnda grnebilir.");
        }
    }
}

async function printWithWebShare() { 
    const pdfInfo = await getUpdatedPdfData();
    if (!pdfInfo) {
        alert("PDF verisi bulunamad.");
        return;
    }

    if (window.flutter_inappwebview && window.flutter_inappwebview.callHandler) {
        try {
            console.log(" PDF yazdrlyor (Flutter - Base64)...");
            
            // ArrayBuffer' base64'e evir
            const base64 = await arrayBufferToBase64(pdfInfo.data);
            
            // Flutter'a base64 string gnder
            await window.flutter_inappwebview.callHandler(
                'printPdfBase64', 
                base64, 
                pdfInfo.name
            );
            
            console.log(" Yazdrma balatld");
            
        } catch (e) {
            console.error(" Yazdrma hatas:", e);
            alert("PDF yazdrma hatas: " + e.message);
        }
    } else {
        document.getElementById('printDialogOverlay').style.display = 'flex'; 
    }
}

// ============================================================================
// YARDIMCI FONKSYON: ARRAYBUFFER  BASE64 DNM
// ============================================================================

async function arrayBufferToBase64(buffer) {
    return new Promise((resolve, reject) => {
        try {
            const blob = new Blob([buffer], { type: 'application/pdf' });
            const reader = new FileReader();
            
            reader.onloadend = () => {
                // "data:application/pdf;base64,..." formatn al
                resolve(reader.result);
            };
            
            reader.onerror = () => {
                reject(new Error("Base64 dnm hatas"));
            };
            
            reader.readAsDataURL(blob);
        } catch (e) {
            reject(e);
        }
    });
}

function hidePrintDialog() { 
    document.getElementById('printDialogOverlay').style.display = 'none'; 
}

async function triggerWebSharePrint() {
    hidePrintDialog();
    const pdfInfo = await getUpdatedPdfData();
    
    if (!pdfInfo) {
        startClassicPrint();
        return;
    }
    
    try {
        const blob = new Blob([pdfInfo.data], { type: 'application/pdf' });
        const file = new File([blob], pdfInfo.name, { type: 'application/pdf' });
        
        if (navigator.share) {
            await navigator.share({ files: [file] });
        } else {
            startClassicPrint();
        }
    } catch (e) { 
        console.error(" Web Share hatas:", e);
        startClassicPrint(); 
    }
}

function startClassicPrint() {
    if (window.PDFViewerApplication) {
        window.PDFViewerApplication.print();
    } else {
        window.print();
    }
}

// =============================================================================
// EVENT LISTENERS AND INITIALIZATION
// =============================================================================

document.addEventListener('DOMContentLoaded', function() {
    initCustomToolbarTheme();
    
    viewerPdfManager.init().then(() => {
        loadPdfIntoViewer();
    });
    
    document.getElementById('customBackButton').addEventListener('click', goBackToIndex);
    document.getElementById('customSaveBtn').addEventListener('click', downloadPDF);
    document.getElementById('customPrintBtn').addEventListener('click', printWithWebShare);
    document.getElementById('customShareBtn').addEventListener('click', sharePDF);
    
    const printDialogCancel = document.getElementById('cancelPrintBtn');
    const printDialogConfirm = document.getElementById('confirmPrintBtn');
    
    if (printDialogCancel) {
        printDialogCancel.addEventListener('click', hidePrintDialog);
    }
    
    if (printDialogConfirm) {
        printDialogConfirm.addEventListener('click', triggerWebSharePrint);
    }
});

window.onpopstate = function(event) {
    cleanupBeforeExit();
};

window.onkeydown = function(e) { 
    if (e.key === 'Escape') {
        e.preventDefault();
        goBackToIndex();
    }
};

window.addEventListener('beforeunload', function() {
    cleanupBeforeExit();
});

document.addEventListener('visibilitychange', function() {
    if (!document.hidden) {
        console.log(" Sayfa grnr oldu, PDF kontrol ediliyor...");
    }
});

// =============================================================================
// FULLSCREEN SUPPORT
// =============================================================================

function toggleFullscreen() {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
            console.log(`Fullscreen hatas: ${err.message}`);
        });
    } else {
        if (document.exitFullscreen) {
            document.exitFullscreen();
        }
    }
}

document.addEventListener('fullscreenchange', function() {
    if (document.fullscreenElement) {
        document.body.classList.add('fullscreen');
    } else {
        document.body.classList.remove('fullscreen');
    }
});

// =============================================================================
// ERROR HANDLING
// =============================================================================

window.addEventListener('error', function(e) {
    console.error(' Global hata:', e.error);
});

if (window.PDFViewerApplication) {
    window.PDFViewerApplication.eventBus.on('error', function(evt) {
        console.error(' PDF.js hatas:', evt);
    });
}

// =============================================================================
// PERFORMANCE OPTIMIZATIONS
// =============================================================================

let lastPageRendered = 0;
const pageRenderDelay = 100;

function optimizePageRendering() {
    if (window.PDFViewerApplication && window.PDFViewerApplication.pdfViewer) {
        const currentPage = window.PDFViewerApplication.pdfViewer.currentPageNumber;
        const now = Date.now();
        
        if (now - lastPageRendered > pageRenderDelay) {
            lastPageRendered = now;
            updatePageIndicator(currentPage);
        }
    }
}

function updatePageIndicator(page) {
    const pageIndicator = document.getElementById('currentPageIndicator');
    if (pageIndicator) {
        const totalPages = window.PDFViewerApplication.pagesCount || 0;
        pageIndicator.textContent = `Sayfa ${page} / ${totalPages}`;
    }
}

if (window.PDFViewerApplication) {
    window.PDFViewerApplication.eventBus.on('pagechanging', optimizePageRendering);
}

// =============================================================================
// FLUTTER COMMUNICATION
// =============================================================================

if (window.flutter_inappwebview) {
    window.addEventListener('flutterInAppWebViewPlatformReady', function(event) {
        console.log(' Flutter WebView hazr');
    });
}

// =============================================================================
// MOBILE-SPECIFIC FEATURES
// =============================================================================

let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
}, { passive: true });

document.addEventListener('touchend', function(e) {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipeGesture();
}, { passive: true });

function handleSwipeGesture() {
    const swipeThreshold = 100;
    const swipeRight = touchEndX - touchStartX > swipeThreshold;
    
    if (swipeRight && touchStartX < 50) {
        goBackToIndex();
    }
}

function adjustForStatusBar() {
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    
    if (isMobile) {
        const customToolbar = document.getElementById('customToolbar');
        if (customToolbar) {
            customToolbar.style.paddingTop = 'env(safe-area-inset-top)';
            customToolbar.style.height = 'calc(35px + env(safe-area-inset-top))';
        }
    }
}

window.addEventListener('load', adjustForStatusBar);
window.addEventListener('resize', adjustForStatusBar);

// =============================================================================
// BACK BUTTON HANDLER FOR ANDROID WEBVIEW
// =============================================================================

let viewerBackPressedTime = 0;

window.viewerBackPressed = function() {
    const now = Date.now();
    
    if (viewerBackPressedTime + 2000 > now) {
        cleanupBeforeExit();
        return 'exit_viewer';
    } else {
        viewerBackPressedTime = now;
        
        const backButton = document.getElementById('customBackButton');
        if (backButton) {
            backButton.click();
        } else {
            goBackToIndex();
        }
        
        return false;
    }
};

console.log(" Viewer IndexedDB ArrayBuffer + Base64 Version Loaded");

</script>



             <!-- ozel toolbar -->
                <!-- ozel toolbar -->
    
    
  </body>
</html>
